# UI 優化與 AI 功能完整指南

## 🎨 全新視覺設計

### 設計理念

本次 UI 優化參考了**期天資訊**的專業金融儀表板設計風格，打造出更具專業感和現代感的投資追蹤工具。整體設計遵循以下原則：

- **專業性**：深色主題配合金融產業標準色彩（紅漲綠跌）
- **易讀性**：大字體、高對比度、清晰的視覺層次
- **觸控友善**：所有按鈕和互動元素最小 44x44px
- **視覺回饋**：豐富的動畫效果和狀態變化

---

## 📱 視覺改進細節

### 1. 色彩系統

採用專業的深色主題配色方案，營造沉穩的金融氛圍。

**背景色階**：
- 主背景：`#0f1419`（深黑藍）
- 卡片背景：`#1a2332` → `#2c3e50`（漸層）
- 次要背景：`rgba(0, 0, 0, 0.2-0.3)`（半透明黑）

**功能色彩**：
- 獲利紅：`#ff4d4f` → `#d9363e`（漸層）
- 虧損綠：`#52c41a` → `#389e0d`（漸層）
- 資訊藍：`#00d8ff` → `#0099cc`（漸層）
- 警示黃：`#f0ad4e`

**文字色彩**：
- 主文字：`#ffffff`（白色）
- 次要文字：`#8b9eb3`（淺灰藍）
- 輔助文字：`#6b7c93`（中灰藍）
- 弱化文字：`#5a6c7d`（深灰藍）

### 2. 字體系統

引入 **Google Fonts** 專業字體組合，提升閱讀體驗。

**中文字體**：Noto Sans TC
- 支援繁體中文
- 多種字重（400/500/600/700/900）
- 清晰易讀

**數字字體**：Roboto Mono
- 等寬字體，數字對齊整齊
- 適合顯示金額和百分比
- 專業金融風格

**字體大小層級**：
- 超大標題：52px（總損益）
- 大標題：28px（股票代碼）
- 中標題：20px（損益金額）
- 正文：15-16px（一般資訊）
- 小字：12-13px（次要資訊）

### 3. 總損益卡片

全新設計的總損益卡片，資訊更豐富、視覺更吸引。

**新增元素**：
- 💰 大型圖示（42px）
- 標題和副標題雙層結構
- 統計數據區塊（獲利/虧損/總計）
- 點擊提示（查看趨勢圖）

**視覺效果**：
- 漸層背景（`#1a2332` → `#2c3e50`）
- 微妙陰影（`0 8px 32px rgba(0, 0, 0, 0.3)`）
- 半透明邊框（`rgba(255, 255, 255, 0.05)`）
- Hover 效果（待實作）

**統計區塊**：
- 深色背景區分
- 圖示 + 標籤 + 數值
- 分隔線分隔三個指標
- 等寬字體顯示數字

### 4. 股票卡片

每張股票卡片都經過精心設計，資訊層次分明。

**左側色條**：
- 寬度：6px（原 8px，更精緻）
- 顏色：根據損益狀態（紅/綠）
- 視覺引導作用

**卡片陰影**：
- 根據損益狀態動態調整
- 獲利：紅色陰影（`rgba(255, 77, 79, 0.15)`）
- 虧損：綠色陰影（`rgba(82, 196, 90, 0.15)`）
- 增加視覺深度

**標題區**：
- 股票代碼：24px 粗體等寬字體
- 股票名稱：16px 灰色
- 水平排列，間距 12px

**持股資訊**：
- 圖示 + 文字組合（📦 張數、💵 買價）
- 點分隔符（•）
- 14px 灰色文字

**損益顯示**：
- 大字體顯示金額（28px）
- 報酬率帶箭頭符號（▲/▼）
- 等寬字體確保對齊

**價格資訊區塊**：
- 獨立深色背景
- 現價（藍色）和保本價（黃色）
- 跳檔數標籤（黃色背景）

**高低點區塊**：
- 圖示（📈/📉）+ 標籤 + 數值 + 時間
- 深色背景 + 邊框
- 水平排列，資訊完整

### 5. 按鈕設計

所有按鈕都經過重新設計，更大、更美觀、更易用。

**主要按鈕**：
- 最小尺寸：48x48px（觸控友善）
- 圓角：14px
- 漸層背景
- 圖示 + 文字組合
- Hover 上浮效果（-2px）

**特殊按鈕**：
- AI 分析：紫色漸層（`#667eea` → `#764ba2`）
- LINE 報告：綠色漸層（`#06c755` → `#00b900`）
- 儲存設定：藍色漸層（`#00d8ff` → `#0099cc`）

**圖示按鈕**：
- 正方形（48x48px）
- 大圖示（20px）
- 半透明背景
- 圓角：12px

### 6. 輸入框

輸入框設計更加友善和直觀。

**視覺特點**：
- 內嵌搜尋圖示（🔍）
- 大內邊距（18px）
- 漸層背景
- 2px 邊框（`#2a3f5f`）

**Focus 效果**：
- 藍色光暈（`0 0 0 3px rgba(0, 216, 255, 0.3)`）
- 無預設 outline
- 平滑過渡動畫

### 7. 圖表優化

圖表視覺效果全面升級。

**新增效果**：
- 漸層填充（從曲線到底部漸變）
- 放大點位（hover 時 r: 6）
- 網格線透明度降低（opacity: 0.3）
- 軸線和標籤顏色統一（`#6b7c93`）

**Tooltip 優化**：
- 漸層背景
- 藍色邊框（`rgba(0, 216, 255, 0.3)`）
- 陰影效果
- 等寬字體顯示數字

### 8. 動畫效果

豐富的動畫效果提升互動體驗。

**Hover 動畫**：
- 按鈕上浮（`translateY(-2px)`）
- 陰影加深
- 0.3s 平滑過渡

**Focus 動畫**：
- 藍色光暈展開
- 無跳動效果

**載入動畫**：
- 旋轉 spinner
- 淡入效果（fadeIn）

**卡片動畫**：
- Hover 上浮（待實作）
- 陰影變化

---

## 🤖 AI 智能分析功能

### Google Gemini AI 整合

本 APP 整合了 Google 最新的 **Gemini 2.0 Flash** AI 模型，提供專業的投資分析建議。

### 功能特點

**智能分析內容**：
1. 整體投資組合評估
2. 個股表現分析
3. 風險提示
4. 操作建議

**使用方式**：
1. 點擊頂部工具列的「🤖 AI 分析」按鈕
2. AI 會自動分析您的持股狀況
3. 幾秒鐘後顯示詳細分析報告
4. 可隨時關閉面板

**分析邏輯**：
- 讀取所有持股的損益數據
- 計算總損益和報酬率
- 識別表現最好和最差的股票
- 生成專業的投資建議

**AI 提示詞範例**：
```
你是一位專業的台股投資顧問。請分析以下持股狀況並提供建議：

總損益：+12,345 元

持股明細：
2330 台積電: 損益 +5,678 (9.87%)
2317 鴻海: 損益 -1,234 (-2.34%)

請提供：
1. 整體投資組合評估
2. 個股表現分析
3. 風險提示
4. 操作建議
```

**技術實現**：
- 使用 Gemini API REST endpoint
- API Key 儲存在環境變數（`.env`）
- 非同步請求，不阻塞 UI
- 錯誤處理和友善提示

### 設定 Gemini API Key

**步驟**：
1. 前往 [Google AI Studio](https://ai.google.dev/)
2. 登入 Google 帳號
3. 建立新的 API Key
4. 在 Vercel 部署設定中加入環境變數：
   - 變數名稱：`REACT_APP_GEMINI_API_KEY`
   - 變數值：您的 API Key

**本地開發**：
- 在專案根目錄建立 `.env` 檔案
- 加入：`REACT_APP_GEMINI_API_KEY=your_api_key_here`
- 重新啟動開發伺服器

---

## 📱 LINE 通知功能

### 功能說明

透過 **LINE Messaging API** 發送每日持股報告到您的 LINE 帳號。

### 使用方式

**發送每日報告**：
1. 點擊頂部工具列的「📱 LINE 報告」按鈕
2. 系統會自動生成報告並發送到 LINE
3. 報告包含總損益、獲利/虧損股票數、個股明細

**報告內容範例**：
```
📊 每日持股報告

💰 總損益：+12,345 元

📈 獲利股票：2 檔
📉 虧損股票：1 檔

持股明細：
2330 台積電: +5,678 (9.87%)
2317 鴻海: -1,234 (-2.34%)
2454 聯發科: +7,899 (12.34%)
```

### 技術實現

**透過 MCP LINE Connector**：
- 使用 Manus 的 MCP 整合功能
- 呼叫 `broadcast_message` 工具
- 自動格式化訊息內容

**訊息額度**：
- LINE 官方帳號免費方案：200 則/月
- 建議每天發送一次報告
- 可在重要時刻手動觸發

**注意事項**：
- 需要先在 Manus 中配置 LINE MCP connector
- 需要 LINE 官方帳號和 Messaging API channel
- 使用者需要加入您的 LINE 官方帳號為好友

### LINE MCP 設定

由於您已經串聯 LINE API，只需確保：
1. LINE MCP connector 已在 Manus 中啟用
2. 已完成 OAuth 認證
3. 有足夠的訊息額度

---

## 📐 響應式設計優化

### 手機版優化

**觸控友善**：
- 所有按鈕最小 48x48px
- 間距增加避免誤觸
- 輸入框大內邊距

**版面調整**：
- 工具列改為網格佈局（2fr 1fr 1fr 1fr）
- 卡片堆疊顯示
- 圖表自動縮放

**字體調整**：
- 基礎字體保持 16px
- 主要數據放大到 28px
- 標題維持 24px

### 自訂滾動條

**桌面版**：
- 寬度：8px
- 軌道顏色：`#1a2332`
- 滑塊顏色：`#2a3f5f`
- Hover 顏色：`#3a5a7f`

**手機版**：
- 使用系統預設滾動條
- 確保流暢滾動體驗

### 防止橫向滾動

**CSS 設定**：
- `overflow-x: hidden`（容器）
- `max-width: 100%`（所有元素）
- `box-sizing: border-box`（全域）

---

## 🎯 使用建議

### 最佳實踐

**AI 分析**：
- 建議在每日收盤後使用
- 可根據 AI 建議調整持股
- 不要完全依賴 AI，需結合自己的判斷

**LINE 通知**：
- 建議每天發送一次報告
- 可在重要時刻（如達到目標價）手動發送
- 注意訊息額度限制

**UI 互動**：
- 善用圖表功能追蹤趨勢
- 利用排序功能快速找到關鍵股票
- 定期檢視高低點記錄

### 效能優化

**建議**：
- 持股數量建議控制在 20 檔以內
- 定期清理歷史數據（目前自動保留 100 筆）
- 在網路穩定的環境下使用

---

## 🔧 技術細節

### 環境變數管理

**`.env` 檔案**：
```
REACT_APP_GEMINI_API_KEY=your_gemini_api_key_here
```

**Vercel 部署設定**：
- 在 Vercel 專案設定中加入環境變數
- 變數名稱必須以 `REACT_APP_` 開頭
- 修改後需重新部署

### Google Fonts 載入

**預載入設定**：
```html
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
```

**字體載入**：
```html
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;600;700;900&family=Roboto+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
```

### CSS 動畫定義

**旋轉動畫**：
```css
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
```

**淡入動畫**：
```css
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
```

---

## 📞 問題排查

### AI 分析無法使用

**可能原因**：
1. Gemini API Key 未設定或錯誤
2. API 配額用盡
3. 網路連線問題

**解決方法**：
1. 檢查環境變數設定
2. 確認 API Key 有效性
3. 查看瀏覽器 Console 錯誤訊息

### LINE 通知發送失敗

**可能原因**：
1. LINE MCP connector 未啟用
2. OAuth 認證過期
3. 訊息額度用盡

**解決方法**：
1. 在 Manus 中重新啟用 LINE connector
2. 重新進行 OAuth 認證
3. 檢查 LINE 官方帳號訊息額度

### UI 顯示異常

**可能原因**：
1. 瀏覽器快取問題
2. Google Fonts 載入失敗
3. CSS 未正確套用

**解決方法**：
1. 清除瀏覽器快取並重新整理
2. 檢查網路連線
3. 使用無痕模式測試

---

## 🚀 未來規劃

### 計畫中的功能

1. **更多 AI 功能**：
   - 個股深度分析
   - 市場趨勢預測
   - 自動化交易建議

2. **LINE 互動增強**：
   - 雙向對話功能
   - 價格警示推播
   - 語音訊息支援

3. **UI 進階優化**：
   - 深色/淺色主題切換
   - 自訂色彩方案
   - 更多動畫效果

4. **資料視覺化**：
   - 圓餅圖（持股配置）
   - 熱力圖（個股表現）
   - 時間軸（交易歷史）

---

## 📚 相關文件

- **FEATURES.md** - 完整功能說明
- **CHANGELOG.md** - 版本更新日誌
- **CHART_GUIDE.md** - 圖表功能指南
- **UI_DESIGN_ANALYSIS.md** - UI 設計分析報告
